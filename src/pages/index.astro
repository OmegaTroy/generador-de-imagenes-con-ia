---
import Layout from "../layouts/Layout.astro";
import { CldUploadWidget } from "astro-cloudinary";

---

<Layout title="Hackathon Spooky AI ðŸŽƒ">
  <main class="flex h-screen flex-col items-center justify-center text-center gap-16 relative z-20">
    
    <h1>Cloudinary Image Generator</h1>
    <CldUploadWidget
      id="upload-widget"
      uploadPreset="SPOOKY AI HACKATHON"
      options={{
        sources: ["local"],
        multiple: false,
        maxFiles: 1,
        language: "es",
        text: {
          es: {
            or: "O",

            menu: {
              files: "Subir desde tu dispositivo",
            },
            local: {
              browse: "Seleccionar",
              dd_title_single: "Arrastra tu imagen aquÃ­",
            },
          },
        },
      }}
    >
      <button
        class="uploadButton"
      >
        Upload Image
      </button>
    </CldUploadWidget>
    </ul>
  </main>
</Layout>

<script>
	const widget = document.getElementById("upload-widget");
	import { navigate } from "astro:transitions/client"
	
	if(widget){
		widget.addEventListener("clduploadwidget:success", ((
        e: CustomEvent<{ info: { public_id: string } }>
      ) => {
        const publicId = e.detail.info.public_id
				navigate(`/imagen?id=${publicId}`)
			}) as EventListener)
	}
</script>
<style>
  h1 {
    position: relative;
    color: rgba(255, 255, 255, 0.1);
    font-size: 10vw;
    text-align: center;
    font-family: "JollyLodger";
    font-weight: 100;
    z-index: 50;
    animation: animateText 5s linear infinite;
  }

  @keyframes animateText {
    0%,
    18%,
    20%,
    50.1%,
    60%,
    65.1%,
    80%,
    90.10%,
    92% {
      color: rgba(255, 255, 255, 0.1);
      text-shadow: none;
    }
    18.1%,
    20.1%,
    30%,
    50%,
    60%,
    65%,
    80.1%,
    90%,
    92.1% {
      color: #f25a02;
      text-shadow:
        0 0 10px #f25a02,
        0 0 20px #f25a02,
        0 0 40px #f25a02,
        0 0 80px #f25a02;
    }
  }

  .uploadButton {
  padding: 1em 2em;
  font-size: 17px;
  text-transform: uppercase;
  letter-spacing: 2.5px;
  font-weight: 600;
  color: #000;
  background-color: #fff;
  border: none;
  border-radius: 45px;
  box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease 0s;
  cursor: pointer;
  outline: none;
}

.uploadButton:hover {
  background-color: #f25a02;
  box-shadow: 0px 15px 20px rgba(242, 90, 2, 0.4);
  color: #fff;
  transform: translateY(-7px);
}

.uploadButton:active {
  transform: translateY(-1px);
}
</style>
